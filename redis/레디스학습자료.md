# 1. 인 메모리 데이터베이스란 무엇인가요?
https://aws.amazon.com/ko/nosql/in-memory/

## 1.1 내용
- 인 메모리 데이터베이스는 데이터 스토리지로 메모리를 사용한다.
- Random Access가 가능하고, SSD보다 빠른 DRAM을 사용함으로써 낮은 지연시간을 가진다.
- CPU 연산의 병목이 되는 데이터 접근을 빠르게 처리할 수 있으므로 Data Intensive Application에서 높은 처리량 보인다.
- 그러나 메모리를 사용하기 때문에 휘발성이 강하다.
- 인메모리 데이터베이스는 데이터의 영속성을 포기하기 때문에 캐싱이나, 일시적인 집계에 사용하거나 입찰같이 실시간성이 아주 중요한 서비스에 사용한다.
- 인메모리의 한계를 극복하기 위한 방법
  - 스냅샷 : 주기적으로 데이터를 저장한다. 스냅샷 저장 사이에 있는 데이터는 손실된다.
  - 트랜잭션 로깅: 명령을 실행하기 전에 명령 자체를 디스크에 로그로 남기고 명령을 실행한다.
  - 복제: 메모리의 고가용성을 확보하기 위해 클러스터를 구성한다.


# 2. Redis Menifesto
http://oldblog.antirez.com/post/redis-manifesto.html

## 2.1 내용
- 레디스는 Data Structure 를 네트워크 상에서 다루기 위한 명령어를 처리한다.
- 레디스 명령어는 Data Structure 의 추상 자료형 인터페이스에 가깝게 설계되어 있다.
- 레디스에서 List push API는 말 그대로 List에 Push 하는 동작을 한다.
- 레디스는 메모리 기반 저장소이기 때문에, offset 기반의 파일 시스템보다 더 복잡한 자료구조를 사용할 수 있고, 저장된 데이터 크기와 처리 속도는 연관성이 적다.
- 레디스의 디스크 기능은 보조 기능일 뿐이다.
- 레디스는 복잡성을 거부한다.
- 분산환경에 잘 맞는 API 와 그렇지 않은 API를 구분하고(multikey), 그렇지 않은 API (MGET 등)는 그 트레이드오프를 설명하고 migrate 방법을 제공한다.

# 3. 레디스 지속성에 관해
http://oldblog.antirez.com/post/redis-persistence-demystified.html

## 3.1 내용
- 데이터는 클라이언트 메모리 -> 서버 메모리 -> 커널 버퍼 -> 디스크 캐시 -> 물리 매체로 흐른다.
- 애플리케이션이 뻗는 경우 커널 버퍼까지만 들어가면 안전하지만, OS 가 뻗는 경우 (전원 차단, 커널 패닉 등) 물리 매체까지 들어가야한다.
- 물리 매체까지 들어가는 것을 보장하는 fsync는 느리고, 해당 스레드는 파일에 배타적인 소유권을 가진다.
- 레디스는 디스크에 스냅샷 방식과 Append Only File 방식을 사용한다.
- 스냅샷은 디스크 IO를 예측하고 백업 복구가 빠르다는 장점이 있으나, 데이터가 손실될 수 있다.
- AOF는 백업 복구가 느리다는 단점이 있으나 손실 우려가 적다
  - AOF 옵션: no (커널이 30초마다 flush), everysec(default, 1초마다 fsync), always(매 요청마다 fsync)

# 4. Redis 와 Memcached 비교
https://antirez.com/news/94

## 4.1 내용
- 레디스는 디스크 IO를 끌 수 있고, 그 빈도 또한 조절할 수 있다.
- 디스크 IO를 선택적으로 사용할 수 있는 것 레디스의 유연함을 보여주는 장점이다.
- 레디스도 작은 크기의 SET을 내부 배열로 표현하는 등 compact한 자료 구조를 사용하기 위해 최적화를 했다.
- Slab Allocator 기반의 memcached 보다 샘플링 LRU 를 사용하는 Redis 가 더 뛰어나다.
- Memcached 의 관리나 설정에서 유리한건 인정하지만 Redis의 파이프라이닝으로 수십만 ops/sec을 달성할 수 있다.